@{
	ViewBag.Title = "Halo 4";
	Layout = "~/Views/Shared/_Layout.cshtml";
	ViewBag.Template = "halo4 halo4_homepage";
	ViewBag.AlternativeFooter = true;
}

<article>
	<div class="container">
		<h1>
			Halo 4 Page
		</h1>
		<p>
			yolo swag nigga
		</p>
	</div>
</article>

@section scripts {
	<script>
		var imagesCount = 4;

		$(document).ready(function () {

			var images = new Array();

			function preload() {
				for (var i = 1; i < 2; i++) {
					for (var j = 1; j < imagesCount + 1; j++) {
						var index = (i * j) - 1;
						images[index] = new Image();
						images[index].src = '/Content/Images/Home/Covers/Halo4/cover' + j + '.jpg';
					}
				}
			}
			function updateGameImage() {
				var pageBgCoverBackupDom = $(".page-bg-backup-cover");
				var currentIndex = pageBgCoverBackupDom.attr('count-data-ref');
				var pageBgCover = $(".page-bg-backup-cover > .page-bg-cover");

				var oldIndex = currentIndex;
				currentIndex++;
				if (currentIndex > imagesCount) currentIndex = 1;

				pageBgCoverBackupDom.css('background-image', 'url(/Content/Images/Home/Covers/Halo4/cover' + oldIndex + '.jpg)');
				$(pageBgCover).fadeOut(800, function () {
					pageBgCover.css('background-image', 'url(/Content/Images/Home/Covers/Halo4/cover' + currentIndex + '.jpg)');
					$(pageBgCover).fadeIn(800, function () {
						$(pageBgCoverBackupDom).attr('count-data-ref', currentIndex);
					});
				});
			}

			preload();

			setInterval(function () {
				updateGameImage();
			}, 4500);
		});
	</script>
}